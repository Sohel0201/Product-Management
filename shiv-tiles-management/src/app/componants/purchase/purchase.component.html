<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-8">
      <div class="card custom-card">
        <div class="card-body">
          <form>
            <div
              class="poppins-semibold text-center fw-semibold fs-3 mt-2 mb-3"
            >
              Purchase Tiles
            </div>
            <hr />
            <div class="row mb-3">
              <div class="col-2"></div>
              <div class="col-6">
                <div class="form-group">
                  <label for="tileSize" class="form-label">Tile Size</label>
                  <mat-form-field appearance="fill" class="w-100">
                    <input
                      type="text"
                      matInput
                      [formControl]="tileSizeInput"
                      [matAutocomplete]="auto"
                    />
                    <mat-autocomplete #auto="matAutocomplete">
                      <mat-option
                        *ngFor="let size of filteredTileSizes | async"
                        [value]="size.size"
                        (onSelectionChange)="selectTileSize(size)"
                      >
                        {{ size.size }}
                      </mat-option>
                    </mat-autocomplete>
                  </mat-form-field>
                </div>
              </div>
              <div
                class="col-3 d-flex justify-content-center align-items-center"
              >
                <button
                  type="button"
                  class="btn btn-outline-secondary btn-lg"
                  (click)="openAddTileSizeDialog()"
                >
                  Add Tile Size
                </button>
              </div>
            </div>

            <div class="row mb-3" *ngIf="tileSizeInput.value">
              <div class="col-2"></div>
              <div class="col-6">
                <div class="form-group">
                  <label for="tileDesign" class="form-label">Tile Design</label>
                  <mat-form-field appearance="fill" class="w-100">
                    <input
                      type="text"
                      matInput
                      [formControl]="tileDesignInput"
                      [matAutocomplete]="autoDesign"
                      (input)="onTileDesignInput($event)"
                    />
                    <mat-autocomplete #autoDesign="matAutocomplete">
                      <mat-option
                        *ngFor="let design of filteredTileDesigns | async"
                        [value]="design.design"
                        (onSelectionChange)="selectTileDesign(design)"
                      >
                        {{ design.design }}
                      </mat-option>
                    </mat-autocomplete>
                  </mat-form-field>
                </div>
              </div>
            </div>

            <div class="row mb-3" *ngIf="tileDesignInput.value">
              <div class="col-2"></div>
              <div class="col-6">
                <div class="form-group">
                  <label for="quantity" class="form-label">Quantity</label>
                  <mat-form-field appearance="fill" class="w-100">
                    <mat-label>Quantity</mat-label>
                    <input
                      matInput
                      type="number"
                      placeholder="0"
                      [disabled]="!tileDesignInput.value"
                      [formControl]="quantityInput"
                    />
                  </mat-form-field>
                </div>
              </div>
            </div>
            <hr />
            <div class="d-flex justify-content-center mt-3">
              <button
                type="button"
                class="btn btn-outline-success btn-lg"
                (click)="purchase()"
              >
                Purchase
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
